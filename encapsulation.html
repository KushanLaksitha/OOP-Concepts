<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OOP Concepts: Encapsulation</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --primary-blue: #2c3e50;
        --accent-blue: #3498db;
        --dark-bg: #1a1a2e;
        --card-bg: #16213e;
        --text-light: #e8e8e8;
        --success-green: #2ecc71;
    }
    body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        .hero-section {
            background: linear-gradient(135deg, #27ae60 0%, #2c3e50 100%);
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeInDown 1s;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
            animation: fadeInUp 1s;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(46, 204, 113, 0.4);
        }
        
        .concept-icon {
            font-size: 3rem;
            color: var(--success-green);
            margin-bottom: 20px;
        }

        .feature-box {
            background: rgba(46, 204, 113, 0.1);
            border-left: 4px solid var(--success-green);
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .feature-icon {
            color: var(--success-green);
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .code-example {
            background: #0d1117;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #30363d;
            position: relative;
            overflow-x: auto;
        }
        
        .code-example pre {
            margin: 0;
            color: #c9d1d9;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .code-label {
            background: var(--success-green);
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-size: 0.8rem;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .analogy-box {
            background: linear-gradient(135deg, #1abc9c, #16a085);
            color: #fff;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .analogy-box h3 {
            border-bottom: 2px solid #fff;
            padding-bottom: 10px;
        }

        .interactive-demo {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .demo-output {
            background: #0d1117;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 100px;
            color: var(--success-green);
            font-family: monospace;
            white-space: pre-wrap;
        }

        .btn-custom {
            background: linear-gradient(135deg, var(--success-green), #27ae60);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(46, 204, 113, 0.5);
            color: white;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
    
</style>
</head>
<body>
<div class="hero-section">
    <div class="container">
        <h1 class="hero-title"><i class="fas fa-shield-alt"></i> Encapsulation</h1>
        <p class="hero-subtitle">ඔබේ දත්ත ආරක්ෂා කිරීම සහ එකට සම්බන්ධ කිරීම (Protecting and Bundling Your Data)</p>
    </div>
</div>
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">

            <div class="content-card">
                <div class="text-center">
                    <i class="fas fa-capsules concept-icon"></i>
                </div>
                <h2 class="text-center mb-4">Encapsulation යනු කුමක්ද?</h2>
                <p class="lead">Encapsulation යනු අදාළ දත්ත (attributes) සහ එම දත්ත මත ක්‍රියාත්මක වන ක්‍රම (methods) තනි ඒකකයක් (class) තුළට එකට සම්බන්ධ කිරීමේ ක්‍රියාවලියයි. මෙහි ප්‍රධාන අරමුණ වන්නේ දත්ත බාහිර අනවශ්‍ය වෙනස්කම් වලින් සඟවා තැබීමයි (Data Hiding).</p>
                
                <div class="feature-box">
                    <i class="fas fa-link feature-icon"></i>
                    <strong>Data Bundling:</strong> Attributes සහ methods එක class එකක් තුළට එකතු කර තැබීම.
                </div>
                
                <div class="feature-box">
                    <i class="fas fa-eye-slash feature-icon"></i>
                    <strong>Data Hiding:</strong> Class එකක අභ්‍යන්තර දත්ත බාහිර ලෝකයෙන් සැඟවීම. මෙය `private` access specifier එක භාවිතයෙන් සිදු කරයි.
                </div>
            </div>

            <div class="analogy-box">
                <h3><i class="fas fa-pills"></i> සැබෑ ලෝක උදාහරණය: බෙහෙත් කරලක් (Capsule)</h3>
                <p>බෙහෙත් කරලක් (capsule) සලකන්න. එහි අඩංගු බෙහෙත් කුඩු (data) ප්ලාස්ටික් ආවරණයෙන් (class) ආවරණය කර ඇත. ඔබට බෙහෙත් කුඩු කෙලින්ම ලබා ගත නොහැක. ඔබට එය ලබා ගත හැක්කේ සම්පූර්ණ කරලම භාවිතා කිරීමෙන් පමණි. </p>
                <p>ඒ ආකාරයටම, Encapsulation මගින් class එකක දත්ත (`private` members) ආරක්ෂා කරන අතර, එම දත්ත වලට ප්‍රවේශ වීමට සහ වෙනස් කිරීමට `public` methods (Getters and Setters) නම් විශේෂ ක්‍රම සපයයි.</p>
            </div>

            <div class="content-card">
                <h3><i class="fas fa-key text-warning"></i> Access Specifiers: `public` vs `private`</h3>
                <p>`private` ලෙස හඳුන්වන members වලට ප්‍රවේශ විය හැක්කේ class එක ඇතුළත ඇති methods වලට පමණි. ඒවා class එකෙන් පිටත සිට කෙලින්ම access කළ නොහැක. `public` ලෙස හඳුන්වන members ඕනෑම තැනක සිට access කළ හැක.</p>
                
                <div class="code-example">
                    <span class="code-label">C++</span>
<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;
using namespace std;

class BankAccount {
private: // Private members - Data Hiding
    string accountHolderName;
    double balance;
    int pin;

public: // Public members - Interface to access data
    // Constructor
    BankAccount(string name, double initialBalance, int secretPin) {
        accountHolderName = name;
        balance = initialBalance;
        pin = secretPin;
    }

    // Setter Method - balance එකට අගයක් ලබා දීමට
    void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            cout &lt;&lt; "Deposit successful. New balance: " &lt;&lt; balance &lt;&lt; endl;
        } else {
            cout &lt;&lt; "Invalid deposit amount." &lt;&lt; endl;
        }
    }

    // Setter Method - balance එකෙන් මුදල් ලබා ගැනීමට
    void withdraw(double amount, int enteredPin) {
        if (enteredPin == pin) {
            if (amount > 0 && amount &lt;= balance) {
                balance -= amount;
                cout &lt;&lt; "Withdrawal successful. New balance: " &lt;&lt; balance &lt;&lt; endl;
            } else {
                cout &lt;&lt; "Invalid withdrawal amount or insufficient balance." &lt;&lt; endl;
            }
        } else {
            cout &lt;&lt; "Incorrect PIN. Transaction failed." &lt;&lt; endl;
        }
    }

    // Getter Method - balance එක දැනගැනීමට
    double getBalance(int enteredPin) {
        if (enteredPin == pin) {
            return balance;
        } else {
            cout &lt;&lt; "Incorrect PIN. Cannot retrieve balance." &lt;&lt; endl;
            return -1; // Error code
        }
    }

    // Getter Method - නම දැනගැනීමට
    string getName() {
        return accountHolderName;
    }
};

int main() {
    BankAccount myAccount("Kamal Perera", 50000.0, 1234);

    // myAccount.balance = 1000000; // ERROR! Cannot access private member
    
    cout &lt;&lt; "Welcome, " &lt;&lt; myAccount.getName() &lt;&lt; "!" &lt;&lt; endl;
    
    // Getter සහ Setter භාවිතා කිරීම
    myAccount.deposit(10000);
    myAccount.withdraw(5000, 1234);
    myAccount.withdraw(1000, 4321); // Incorrect PIN

    // balance එක public නොවන නිසා getBalance() method එක භාවිතා කළ යුතුයි
    double currentBalance = myAccount.getBalance(1234);
    if(currentBalance != -1){
        cout &lt;&lt; "Your current balance is: " &lt;&lt; currentBalance &lt;&lt; endl;
    }
    
    return 0;
}
</code></pre>
                </div>
                <div class="alert alert-success mt-3">
                    <i class="fas fa-info-circle"></i> <strong>Output:</strong><br>
                    Welcome, Kamal Perera!<br>
                    Deposit successful. New balance: 60000<br>
                    Withdrawal successful. New balance: 55000<br>
                    Incorrect PIN. Transaction failed.<br>
                    Your current balance is: 55000
                </div>

                 <div class="feature-box mt-4">
                    <i class="fas fa-check-circle feature-icon"></i>
                    <strong>Encapsulation වල වාසි (Advantages):</strong><br>
                    <ul>
                        <li><b>Data Security:</b> දත්ත වලට අනවසර ප්‍රවේශය නවත්වයි.</li>
                        <li><b>Flexibility & Maintainability:</b> Class එකේ අභ්‍යන්තර ක්‍රියාවලිය වෙනස් කළ විට, එය භාවිතා කරන බාහිර code වලට බලපෑමක් සිදු නොවේ.</li>
                        <li><b>Better Control:</b> Setter methods තුළ validation (e.g., මුදල් තැන්පත් කිරීමේදී සෘණ අගයක් නොදීම) එකතු කිරීමෙන් දත්ත වල නිවැරදි බව තහවුරු කළ හැක.</li>
                    </ul>
                </div>
            </div>

            <div class="interactive-demo">
                <h3><i class="fas fa-university"></i> Bank Account Simulator</h3>
                <p>ඔබේ ගිණුම සමඟ ගනුදෙනු කරන්න. (PIN: <b>1234</b>)</p>
                <div class="row">
                    <div class="col-md-5">
                        <input type="number" class="form-control mb-2" id="amount" placeholder="Amount">
                    </div>
                    <div class="col-md-4">
                        <input type="password" class="form-control mb-2" id="pin" placeholder="Enter PIN">
                    </div>
                    <div class="col-md-3">
                         <button class="btn btn-primary w-100 mb-2" onclick="performTransaction('deposit')">Deposit</button>
                    </div>
                     <div class="col-md-12">
                         <button class="btn btn-danger w-100" onclick="performTransaction('withdraw')">Withdraw</button>
                    </div>
                </div>
                <div class="demo-output" id="output">
                   // Initial Balance: 50000.0 <br>
                   Transaction log will appear here...
                </div>
            </div>

            <div class="navigation-buttons">
                <a href="classes_objects.html" class="btn btn-custom">
                    <i class="fas fa-arrow-left"></i> Previous: Classes & Objects
                </a>
                <a href="abstraction.html" class="btn btn-custom">
                    Next: Abstraction <i class="fas fa-arrow-right"></i>
                </a>
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Simulate a simple BankAccount object
    let bankAccount = {
        balance: 50000.0,
        pin: 1234,
        deposit: function(amount) {
            if (amount > 0) {
                this.balance += amount;
                return `SUCCESS: Deposited ${amount}. New balance: ${this.balance}`;
            } else {
                return `ERROR: Invalid deposit amount.`;
            }
        },
        withdraw: function(amount, enteredPin) {
             if (enteredPin !== this.pin) {
                return `ERROR: Incorrect PIN.`;
            }
            if (amount > 0 && amount <= this.balance) {
                this.balance -= amount;
                return `SUCCESS: Withdrew ${amount}. New balance: ${this.balance}`;
            } else {
                return `ERROR: Insufficient funds or invalid amount.`;
            }
        }
    };

    const outputElement = document.getElementById('output');

    function performTransaction(type) {
        const amount = parseFloat(document.getElementById('amount').value);
        const pin = parseInt(document.getElementById('pin').value);
        let result;

        if (isNaN(amount) || isNaN(pin)) {
            result = "ERROR: Please enter a valid amount and PIN.";
        } else {
            if (type === 'deposit') {
                result = bankAccount.deposit(amount);
            } else if (type === 'withdraw') {
                result = bankAccount.withdraw(amount, pin);
            }
        }
        
        outputElement.innerHTML += `\n> ${result}`;
        outputElement.scrollTop = outputElement.scrollHeight;
    }
</script>
</body>
</html>